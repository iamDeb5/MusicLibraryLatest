<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicLib - Your Music Streaming Platform</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h1>üéµ MusicLib</h1>
        </div>
        <nav class="sidebar-nav">
            <button class="nav-item active" data-section="songs">
                <span class="nav-icon">üéµ</span> <span>Songs</span>
            </button>
            <button class="nav-item" data-section="playlists">
                <span class="nav-icon">üìã</span> <span>Playlists</span>
            </button>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Songs Section -->
        <section id="songsSection" class="content-section">
            <div class="section-header">
                <h2>Your Music Library</h2>
            </div>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="üîç Search songs, artists, albums..." />
                <button id="searchBtn">Search</button>
            </div>

            <div id="loading" class="loading hidden">
                <div class="spinner"></div>
                <p>Loading your music...</p>
            </div>
            <div id="error" class="error hidden"></div>
            <div id="success" class="success hidden"></div>

            <div id="songsList" class="songs-list">
                <!-- Songs loaded here -->
            </div>
        </section>

        <!-- Playlists Section -->
        <section id="playlistsSection" class="content-section hidden">
            <div class="section-header">
                <h2>Your Playlists</h2>
                <button class="btn-primary" id="createPlaylistBtn">‚ûï Create Playlist</button>
            </div>

            <div id="playlistsList" class="playlists-grid">
                <!-- Playlists loaded here -->
            </div>
        </section>
    </main>

    <!-- Music Player (Fixed at Bottom) -->
    <div id="musicPlayer" class="music-player hidden">
        <div class="player-info">
            <div class="now-playing">
                <div class="song-title" id="nowPlayingTitle">No song selected</div>
                <div class="artist-name" id="nowPlayingArtist"></div>
            </div>
        </div>
        <div class="player-controls">
            <button id="prevBtn" class="player-btn">‚èÆ</button>
            <button id="playPauseBtn" class="player-btn play-btn">‚ñ∂</button>
            <button id="nextBtn" class="player-btn">‚è≠</button>
        </div>
        <div class="player-progress">
            <span id="currentTime">0:00</span>
            <input type="range" id="progressBar" min="0" max="100" value="0">
            <span id="totalTime">0:00</span>
        </div>
        <audio id="audioPlayer"></audio>
    </div>

    <!-- Add Song Modal -->
    <div id="addFormOverlay" class="modal-overlay hidden"></div>
    <div id="addForm" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Song</h2>
                <button class="modal-close" id="closeAddForm">‚úï</button>
            </div>
            <form id="addSongForm">
                <div class="form-group">
                    <label>Song Title *</label>
                    <input type="text" id="songTitle" required />
                </div>
                <div class="form-group">
                    <label>Artist Name *</label>
                    <input type="text" id="artistName" required />
                </div>
                <div class="form-group">
                    <label>Album Name *</label>
                    <input type="text" id="albumName" required />
                </div>
                <div class="form-group">
                    <label>Duration (seconds) *</label>
                    <input type="number" id="duration" min="1" required />
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Add Song</button>
                    <button type="button" class="btn-secondary" id="cancelAddForm">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Playlist Modal -->
    <div id="createPlaylistOverlay" class="modal-overlay hidden"></div>
    <div id="createPlaylistForm" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Playlist</h2>
                <button class="modal-close" id="closeCreatePlaylist">‚úï</button>
            </div>
            <form id="createPlaylistFormElement">
                <div class="form-group">
                    <label>Playlist Name *</label>
                    <input type="text" id="playlistName" required />
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="playlistDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Create</button>
                    <button type="button" class="btn-secondary" id="cancelCreatePlaylist">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add to Playlist Modal -->
    <div id="addToPlaylistOverlay" class="modal-overlay hidden"></div>
    <div id="addToPlaylistModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add to Playlist</h2>
                <button class="modal-close" id="closeAddToPlaylist">‚úï</button>
            </div>
            <input type="hidden" id="songToAddId" value="" />
            <div class="form-group">
                <label>Select Playlist</label>
                <select id="selectPlaylist">
                    <option value="">Loading playlists...</option>
                </select>
            </div>
            <div class="form-actions">
                <button id="addToPlaylistBtn" class="btn-primary">Add</button>
                <button class="btn-secondary" id="cancelAddToPlaylist">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Check authentication before loading app
        if (!localStorage.getItem('userId')) {
            window.location.href = '/login.html';
        }
    </script>
    <script src="app.js"></script>
</body>
</html>
